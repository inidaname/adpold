$(document).ready(function(){function a(a){for(var e=window.location.search.substring(1),n=e.split("&"),t=0;t<n.length;t++){var i=n[t].split("=");if(i[0]==a)return i[1]}return!1}function a(a){for(var e=window.location.search.substring(1),n=e.split("&"),t=0;t<n.length;t++){var i=n[t].split("=");if(i[0]==a)return i[1]}return!1}function e(a,e){e=e||"-";var n=new Array(a+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,a);return n.toUpperCase().replace(/(\w{4})/g,"$1"+e).substr(0,a+Math.round(a/4)-1)}var n="",t="";$("#passport").change(function(){var a=this.files[0];picname=a.name,picsize=a.size,pictype=a.type;var e=["image/jpg","image/jpeg","image/png","image/gif"];if($.inArray(pictype,e)){var t=new FormData;t.append("file",$("input[type=file]")[0].files[0]),$.ajax({url:"/php/ajax/imageupload.php",type:"POST",data:t,contentType:!1,cache:!1,processData:!1,success:function(a){n=a}})}else;}),checkme=[];var i=$("#fullname"),l=$("#phonenumber");if(i.click(function(){$("#nalab").css("display","inline").fadeIn("13000")}).blur(function(){$("#nalab").fadeOut("13000")}),l.click(function(){$("#colab").css("display","inline").fadeIn("13000")}).blur(function(){$("#colab").fadeOut("13000")}),l.blur(function(){""!=l.val()&&""!=i.val()&&($.isNumeric(l.val())||isEmail(l.val()))&&$.ajax({url:"/php/ajax/checkuser.php",type:"POST",data:{contactDetail:l.val()},dataType:"json"}).done(function(a){$("#colab").remove(),$("#useable").html(a.message),1==a.success&&$("#membership").removeAttr("disabled")})}).keypress(function(){$("#membership").attr("disabled","")}).mousemove(function(){""!=l.val()&&""!=i.val()&&($.isNumeric(l.val())||isEmail(l.val()))&&$("#membership").removeAttr("disabled","")}),$("#memVis").submit(function(a){$.ajax({url:"/php/ajax/register.php",type:"POST",dataType:"json",data:{fullname:$("input[name=fullname]").val(),contactDetail:$("input[name=phonenumber]").val()}}).done(function(a){console.log(a),window.location.href="register.html?p="+a.hashUser+"&t=User"}).error(function(a){console.log(a)}),a.preventDefault()}),$("#fullpro").submit(function(a){$.ajax({url:"/php/ajax/fullpro.php",type:"POST",dataType:"json",data:{picture:n,firstname:$("input[name=firstname]").val(),lastname:$("input[name=lastname]").val(),gender:$("select[name=gender]").val(),dateofbirth:$("input[name=dateofbirth]").val(),phone:$("input[name=phone]").val(),email:$("input[name=emaildd]").val(),hashUser:$("input[name=hashUser]").val()}}).done(function(a){t=MD5($("input[name=emaildd]").val()+$("input[name=phone]").val()),1==a.success&&(window.location.href="register.html?p="+$("input[name=hashUser]").val()+"&t=address")}),a.preventDefault()}),$("#fulladd").submit(function(a){$.ajax({url:"/php/ajax/fulladd.php",type:"POST",dataType:"json",data:{stateoforigin:$("input[name=stateoforigin]").val(),lgarea:$("input[name=lgarea]").val(),wardarea:$("select[name=wardarea]").val(),countryofres:$("input[name=countryofres]").val(),addressOfRes:$("input[name=addressOfRes]").val(),hashUser:$("input[name=hashUser]").val()}}).done(function(a){1==a.success&&(window.location.href="confirm.html?p="+$("input[name=hashUser]").val())}),a.preventDefault()}),window.location.href.indexOf("register")>-1){var s=($("input[name=phone]"),$("input[name=emaildd]"),a("p")),r=a("t");""!==s&&""!==r&&($(".regForm").slideDown(1e3),$("#hashUser").val(s),$("#hashUserag").val(s),$.ajax({url:"/php/ajax/getit.php",type:"POST",dataType:"json",data:{hashUser:s}}).done(function(a){if(console.log(a),1==a.success){var e=a.userdatas.fullname,n=e.split(" "),t=n[0],i=n[1];$("input[name=firstname]").val(t),$("input[name=lastname]").val(i),"Email"==a.userdatas.contactType?$("input[name=emaildd]").val(a.userdatas.contactDetail).attr("disabled",""):$("input[name=phone]").val(a.userdatas.contactDetail).attr("disabled","")}}),"User"==r?($("#fullpro").fadeIn(5e3),$("#d1").fadeIn(5e3)):"address"==r&&($("#fullpro").fadeOut(1e3),$("#fulladd").fadeIn(5e3).delay(1200),$("#d2").fadeIn(5e3)))}if(window.location.href.indexOf("confirm")>-1){var s=a("p"),r=a("t");$("#qrgen").val(s),console.log(e(24," ")),console.log(e(24)),console.log(e(20)),console.log(e(16))}});